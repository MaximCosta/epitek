/*
** EPITECH PROJECT, 2021
** Test
** File description:
** For test functions
*/

#include <criterion/criterion.h>
#include <criterion/redirect.h>
#include "my.h"

void redirect_all_stdout(void);
char *eval_expr(char const *base, char const *ops,
    char const *expr, unsigned int size);

Test(eval_expr, test_eval_expr11, .init=redirect_all_stdout)
{
    char s[] = "(91827816491287649812764219-912874698127694871264249876124)*(4\
12098741246217864918247019287492689219047012412*(98472610462894892714628176491\
274692814+-14712087012984702918740928131293761298376123)/18273687126387213)+1";
    char r[] = "30284050547118519237589518025152633970641582714818022607170179\
1233396096402522152473050029302555762136581";

    my_putstr(eval_expr("0123456789", "()+-*/%", s, 217));
    cr_assert_stdout_eq_str(r);
}

Test(eval_expr, test_eval_expr12, .init=redirect_all_stdout)
{
    char s[] = "--+(91827816491287649812764219-++91287469812769487126424987612\
4)*-+-(-+412098741246217864918247019287492689219047012412*-(984726104628948927\
14628176491274692814+-14712087012984702918740928131293761298376123)/-182736871\
26387213)+-1";
    char r[] = "-3028405054711851923758951802515263397064158271481802260717017\
91233396096402522152473050029302555762136581";

    my_putstr(eval_expr("0123456789", "()+-*/%", s, 230));
    cr_assert_stdout_eq_str(r);
}
