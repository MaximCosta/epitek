[Unit]
Description=Worker Service

[Service]
Environment=REDIS_HOST={{ hostvars['redis'].ansible_host }}
Environment=POSTGRESQL_HOST={{ hostvars['postgresql'].ansible_host }}
Environment=POSTGRESQL_USER={{ postgres_user }}
Environment=POSTGRESQL_PASSWORD={{ postgres_password }}
Environment=POSTGRESQL_PORT={{ postgres_port }}
Environment=POSTGRESQL_DB={{ postgres_database }}
ExecStart=java -jar /etc/worker/target/worker-jar-with-dependencies.jar
WorkingDirectory=/etc/worker
Restart=always